const config = require('../config');
const { cmd, commands } = require('../command');
const moment = require('moment-timezone');

cmd({
    pattern: "menu",
    react: "ðŸ‡±ðŸ‡°",
    desc: "Get the list of all commands",
    category: "main",
    filename: __filename
},
async (conn, mek, m, {
    from, pushname, reply
}) => {
    try {
        let menu = {
            main: '',
            download: '',
            fun: '',
            group: '',
            owner: '',
            convert: '',
            search: '',
            other: '',
            news: ''
        };

        for (let i = 0; i < commands.length; i++) {
            if (commands[i].pattern && !commands[i].dontAddCommandList) {
                menu[commands[i].category] += `â”‹ ${commands[i].pattern}\n`;
            }
        }

        // Get the current time, date, and day of the week
        const time = moment().tz("Asia/Colombo").format("HH:mm:ss");
        const date = moment().tz("Asia/Colombo").format("DD/MM/YYYY");
        const dayOfWeek = moment().tz("Asia/Colombo").format("dddd");

        let greeting = "Good Night ðŸŒŒ"; // Default greeting
        
        if (time < "05:00:00") {
            greeting = "Good Morning ðŸŒ„";
        } else if (time < "11:00:00") {
            greeting = "Good Morning ðŸŒ„";
        } else if (time < "15:00:00") {
            greeting = "Good Afternoon ðŸŒ…";
        } else if (time < "19:00:00") {
            greeting = "Good Evening ðŸŒƒ";
        }

        let madeMenu = `â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â’
        
        âž¤ ÊœÉª ${pushname} ðŸ‘‹ðŸ» á´¡á´‡ÊŸá´„á´á´á´‡ á´›á´ á´Ê€.É´á´€á´…á´œá´¡á´€-á´ 1
        
        â”•â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â’

        ðŸŒŸ á´„á´á´á´á´€É´á´…s á´„á´€á´›á´‡É¢á´Ê€Éªá´‡s ðŸŒŸ

        â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â’
        â”‚ ðŸ”¹ *Download* Commands
        â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â’
        ${menu.download}
        
        â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â’
        â”‚ ðŸ”¹ *Fun* Commands
        â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â’
        ${menu.fun}
        
        â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â’
        â”‚ ðŸ”¹ *Main* Commands
        â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â’
        ${menu.main}
        
        â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â’
        â”‚ ðŸ”¹ *Group* Commands
        â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â’
        ${menu.group}
        
        â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â’
        â”‚ ðŸ”¹ *Owner* Commands
        â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â’
        ${menu.owner}
        
        â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â’
        â”‚ ðŸ”¹ *Convert* Commands
        â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â’
        ${menu.convert}
        
        â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â’
        â”‚ ðŸ”¹ *Search* Commands
        â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â’
        ${menu.search}
        
        â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â’
        â”‚ ðŸ”¹ *Other* Commands
        â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â’
        ${menu.other}
        
        â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â’
        â”‚ ðŸ”¹ *News* Commands
        â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â’
        ${menu.news}

        ðŸ› ï¸ á´˜á´á´¡á´‡Ê€á´‡á´… Ê™Ê á´Ê€ É´á´€á´…á´œá´¡á´€

        ðŸŒŸ á´…á´‡á´ á´‡ÊŸá´á´˜á´‡á´… á´¡Éªá´›Êœ â¤ï¸ Ê™Ê á´Ê€ É´á´€á´…á´œá´¡á´€ ðŸŒŸ

        â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
        ðŸ•°ï¸ *Current Time*: ${time}
        ðŸ“… *Date*: ${date}
        ðŸ“† *Day*: ${dayOfWeek}
        ðŸ¤– *Greeting*: ${greeting}
        â”›â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
        `;

        await conn.sendMessage(from, {
            image: { url: config.ALIVE_IMG },
            caption: madeMenu
        }, { quoted: mek });

    } catch (e) {
        console.log(e);
        reply(`Error: ${e}`);
    }
});